<?xml version='1.1' encoding='UTF-8'?>
<flow-definition plugin="workflow-job@1239.v71b_b_a_124a_725">
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <com.dabsquared.gitlabjenkins.connection.GitLabConnectionProperty plugin="gitlab-plugin@1.5.35">
      <gitLabConnection></gitLabConnection>
      <jobCredentialId></jobCredentialId>
      <useAlternativeCredential>false</useAlternativeCredential>
    </com.dabsquared.gitlabjenkins.connection.GitLabConnectionProperty>
  </properties>
  <definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@2802.v5ea_628154b_c2">
    <script>#!/usr/bin/env groovy
node() {
  
    try {
        stage(&apos;Prepare code&apos;) {
		    git url: &apos;https://gitlab.com/ID2A/dummyapi.git&apos;, branch: &apos;main&apos;
        }
        
        stage(&apos;Start Testing&apos;){
        	withMaven(maven: &apos;Maven 3.8.6&apos;) {
        	    dir(&quot;${env.WORKSPACE}/dummyapi&quot;){
                    sh &quot;mvn clean test -Dtest=AnExampleOfGeneralExecutorOfTest serenity:aggregate&quot;
                }
            }
        }

        currentBuild.result = &quot;SUCCESS&quot;
        
    } catch (e) {
        // If there was an exception thrown, the build failed
        currentBuild.result = &quot;FAILED&quot;
        throw e
        
    } finally {
        publishReport();
    }
}

def publishReport(){
       publishHTML(target: [
        reportName : &apos;Serenity&apos;,
        reportDir:   &apos;dummyapi/target/site/serenity&apos;,
        reportFiles: &apos;index.html&apos;,
        keepAll:     true,
        alwaysLinkToLastBuild: true,
        allowMissing: false
    ])
}
</script>
    <sandbox>true</sandbox>
  </definition>
  <triggers/>
  <disabled>false</disabled>
</flow-definition>